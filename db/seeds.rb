@fill_txt = "Bionore and Aden had been friends for what felt like an eternity. They met in college, bonding over late-night pizza and study sessions. Over time, their friendship evolved into something more... casual. They both agreed on a friends-with-benefits arrangement, and it seemed like the perfect solution. No strings attached, no drama, just fun. As the months went by, Aden found himself growing more and more attached to Bionore. He couldn't quite put his finger on when it started, but he remembered the way his heart skipped a beat when she smiled at him, the way his hands itched to touch her whenever she was near. He tried to brush it off as mere infatuation, but deep down, he knew it was something more."

@theme_names = [ "fonts", "furniture", "branding", "merch", "logo", "navigation", "posters" ]

@comment_text = [ "Этот дизайн настолько минималистичен, что я чувствую себя виноватым, нажимая на кнопку.", "Я видел сайты из 90-х с более современной графикой.", "Навигация в этом интерфейсе – как поиск выхода из лабиринта с завязанными глазами.", "Цветовая схема напоминает мне радугу после стирки.", "Кнопки такие маленькие, что мне нужен микроскоп, чтобы на них нажать.", "Я пытался прокрутить страницу, но вместо этого случайно вызвал духов.", "Дизайн настолько интуитивно понятный, что я до сих пор не понимаю, как им пользоваться.", "Шрифт такой мелкий, что мне пришлось увеличить масштаб до 500%, чтобы прочитать текст.", "Кажется, дизайнер вдохновлялся ранними версиями Paint.", "Я кликнул на кнопку и мой компьютер завис. Думаю, это была пасхалка.", "Этот интерфейс выглядит так, будто его создавали в Microsoft Word.", "Я случайно закрыл вкладку, потому что иконка закрытия больше, чем контент.", "Навигационное меню спрятано так хорошо, что я, наверное, никогда его не найду.", "Этот интерфейс – настоящий тест на терпение.", "Дизайн такой яркий, что у меня заболели глаза.", "Я пытался найти кнопку \"Связаться с нами\", но, кажется, разработчики не хотят, чтобы с ними связывались.", "Этот интерфейс – как путешествие во времени, только в худшем смысле.", "Я так долго ждал загрузки страницы, что успел написать роман.", "Этот дизайн настолько запутанный, что я чувствую себя хакером, пытаясь им пользоваться.", "Я уверен, что где-то здесь спрятана игра \"Где's Waldo?\".", "Этот интерфейс — шедевр... абсурда.", "Я пытался зарегистрироваться, но форма запросила мой номер социального страхования и группу крови.", "Дизайн такой оригинальный, что я даже не знаю, как его описать.", "Я чувствую, что мне нужен PhD в области дизайна, чтобы понять этот интерфейс.", "Кажется, кто-то вылил на клавиатуру ведро краски и назвал это дизайном.", "Я случайно нажал на рекламу и скачал вирус. Спасибо, дизайнеры!", "Я пытался найти информацию на сайте, но сдался и воспользовался Google.", "Этот дизайн настолько плох, что он даже хорош. Почти." ]

@names = [ "digitalnyan", "kiozain", "zlatko", "tuberkulexa", "Чхыф", "humanim4lien", "somebody", "nobody31", "shoegazer", "волчок" ]
@bios = [
 "Создаёт объекты из пыли, собранной в заброшенных библиотеках. Работает только по чётным вторникам",
  "Медитирует на геометрические фигуры и переносит свои видения в керамику. Никогда не использует круглые формы",
  "Рисует звуки ветра акварелью. Отказывается признавать существование красного цвета",
  "Плетёт паутину из старых телефонных проводов. Утверждает, что получает инструкции от муравьёв",
  "Фотографирует тени несуществующих объектов. Работает исключительно в полнолуние",
  "Коллекционирует моменты тишины и превращает их в скульптуры. Общается только через записки",
  "Вышивает карты воображаемых метро. Каждую станцию называет именем случайного прохожего",
  "Превращает математические ошибки в абстрактные полотна. Считает число π переоценённым",
  "Лепит из глины копии своих снов. Утверждает, что не спал с 1999 года",
  "Создаёт инсталляции из потерянных воспоминаний. Хранит коллекцию забытых зонтиков",
  "Рисует картины, используя только звёздный свет и росу. Ведёт переписку с облаками",
  "Собирает эхо в стеклянные сосуды и превращает их в скульптуры. Живёт в перевёрнутом доме",
  "Плетёт гобелены из тумана и утренней прохлады. Коллекционирует понедельники",
  "Фотографирует мысли прохожих. Утверждает, что его камера питается от лунного света",
  "Создаёт керамику из застывших секунд. Работает только во время дождя",
  "Рисует портреты невидимых людей. Подписывает работы задом наперёд",
  "Ваяет скульптуры из застывшего времени. Мастерская находится между вчера и завтра",
  "Делает коллажи из найденных снов. Никогда не работает в високосные годы",
  "Печатает гравюры на листьях несуществующих деревьев. Использует чернила из лунного света",
  "Создаёт инсталляции из забытых обещаний. Выставляется только в високосные годы",
  "Вяжет свитера из солнечных лучей. Каждое изделие существует ровно один день",
  "Лепит горшки из застывших звуков. Глазурует их шёпотом",
  "Рисует на изнанке ветра. Подписывает работы именами случайных созвездий",
  "Создаёт скульптуры из сломанных часов. Утверждает, что может останавливать время",
  "Ткёт полотна из паутины снов. Работает только в полной темноте",
  "Делает принты из квантовой неопределённости. Каждая работа существует и не существует одновременно",
  "Фотографирует отсутствие предметов. Печатает на бумаге из прошлогоднего снега",
  "Создаёт керамику из застывших моментов дежавю. Обжигает в печи времени",
  "Рисует музыку тишины. Использует кисти из лунного света",
  "Плетёт кружево из тумана. Каждый узор существует только до первого луча солнца"
  ]
  
  @words = @fill_txt.downcase.gsub(/[-.—,':()]/, '').gsub(/  /, ' ').split(' ')

def seed
  reset_db
  create_users(10)
  create_theme
  create_task(20)
  create_answer(7)
  create_comment(3)
end

def reset_db
  Rake::Task['db:drop'].invoke
  Rake::Task['db:create'].invoke
  Rake::Task['db:migrate'].invoke
end


def create_users(quantity)
  i = 0

  quantity.times do
    user_data = {
      email: "redis_#{i}@email.com",
      password: 'testtest'
    }

    if i == 7
      user_data[:admin] = true
    end

    user = User.create!(user_data)
    puts "User created with jti #{user.jti }"

    profile_data = {
      name: @names.sample,
      bio: @bios.sample,
      avatar: upload_random_taskimg
    }

    user.create_profile!(profile_data)
    puts "Profile created for user with id #{user.id}: #{profile_data[:name]}"

    i += 1
  end
end

def create_title
  title_n = []

  (1..4).to_a.sample.times do
    title_n << @words.sample
  end

  titlename = title_n.join(' ').capitalize + '.'
end

# def create_theme_title
#   @theme_name.sample
# end

def create_description
  description_n = []

  (10..100).to_a.sample.times do
    description_n << @words.sample
  end

  descriptionst = description_n.join(' ').capitalize + '.'
end

def create_text
  text_n = []

  (10..300).to_a.sample.times do
    text_n << @words.sample
  end

  textn = text_n.join(' ').capitalize + '.'
end


def upload_random_taskimg
  uploader = TaskImageUploader.new(Task.new, :image)
  uploader.cache!(File.open(Dir.glob(File.join(Rails.root, "public/autoupload/taskimg", "*")).sample))
  uploader
end

def upload_random_answerimg
  uploader = AnswerImgUploader.new(Answer.new, :answer_img)
  uploader.cache!(File.open(Dir.glob(File.join(Rails.root, "public/autoupload/answerimg", "*")).sample))
  uploader
end
# def upload_random_cover
#   uploader = CoverUploader.new(Story.new, :cover)
#   uploader.cache!(File.open(Dir.glob(File.join(Rails.root, "public/autoupload/covers", "*")).sample))
#   uploader
# end


def create_task(quantity)
  themes = Theme.all

  puts themes

  if themes.empty?
    puts "No Theme available to create Task to it."
    return
  end

  themes.each do |theme|
    task_count = quantity
    task_count.times do |i|
      user = User.all.sample
      task = Task.create!(
        name: create_title,
        descroption: create_description,
        image: upload_random_taskimg,
        username: user.email,


        theme_id: theme.id,
        user_id: user.id

      )
      puts "Task with id #{task.id} was made for Theme with id #{theme.theme_title}"
    end
  end


  # quantity.times do
  #   # user = User.all.sample
  #   task = Task.create(name: create_title, descroption: create_description, image: upload_random_taskimg, theme_id: theme.id)
  #   puts "Task with id #{task.id} and title #{task.name} was made!"
  # end
end


def create_answer(quantity)
  tasks = Task.all

  puts tasks

  if tasks.empty?
    puts "No Task available to create Answer to it."
    return
  end

  tasks.each do |task|
    answer_count = quantity
    answer_count.times do |i|
      user = User.all.sample
      answer = Answer.create!(
        user_name: user.email,
        description: create_description,
        answer_img: upload_random_answerimg,

        task_id: task.id,
        user_id: user.id

      )
      puts "Answer with id #{answer.id} was made for Task with id #{task.id}"
    end
  end
end

def create_comment(quantity)
  answers = Answer.all

  puts answers

  if answers.empty?
    puts "No Answer available to create Comment to it."
    return
  end

  answers.each do |answer|
    comment_count = quantity
    comment_count.times do |i|
      user = User.all.sample
      comment = Comment.create!(
        user_name_title: user.email,
        body_content: @comment_text.sample,
        answer_id: answer.id,
        user_id: user.id

      )
      puts "Comment with id #{comment.id} was made for Answer with id #{answer.id}"
    end
  end
end

def create_theme
  @theme_names.each do |theme_name|
    Theme.find_or_create_by!(theme_title: theme_name) do |new_theme|
      # theme = Theme.create(
      #    theme_title: theme_name,
      #    theme_descr: create_description
      # )
      new_theme.theme_descr = create_description
      new_theme.theme_cover = upload_random_taskimg

      new_theme.save!

      puts "Created theme: #{theme_name}"
    end
  end
end

# НЕ ПОЛУЧИЛОСЬ)))))))))
#  theme = Theme.find_or_create_by!(theme_title: theme_name) do |new_theme|
# new_theme.theme_descr = create_description
# end


# def create_comment_replies
#   Comment.all.each do |comment|
#     answers = Answer.all

#     puts answers
#     user = User.all.sample
#     if rand(1..3) == 1
#       comment_reply = comment.replies.create!(
#         user_name_title: user.email,
#         body_content: @comment_text.sample,)
#       puts "Comment reply with id #{comment_reply.id} for answer with id #{comment_reply.answer.id} just created"
#     end
#   end
# end


seed
